<% provide(:uploader, "user[avatar]") %>
<% provide(:uploader_icon, "fas fa-camera") %>


<%= render "devise/shared/error_messages", resource: resource %>

<div id="prof_edit_page" class="card container">  
  
  <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
    
    <div class="row justify-content-center align-items-end top-row">
      
      <div class="col-4 ">
        <% if @user.avatar? %>
          <%= image_tag @user.avatar.url, class: "prf-img" %> 
        <% else %>
          <%= image_tag 'prf_img.jpg', class: "prf-img" %>
        <% end %>
          
      </div>
      
      <div class="col-8 wrapper_uploader_prof_edit">
      
        <%= f.file_field :avatar, class: "img_uploader" %>
        
        <%= render 'shared/uploader' %>
        
        
      </div>
    </div>
    
    <div class="row justify-content-center">
      

      <div class="field <%= "has_error" if !resource.errors.details[:nickname].blank? %>">
        <%= f.label :ニックネーム, class: "standard_form_label" %><br />
        <%= f.text_field :nickname, class: "standard_form", autocomplete: "off" %>
        <%= render 'devise/errors/error_msg_nickname' if !resource.errors.details[:nickname].blank? %>
      </div>
      
    </div>
    
    <div class="row justify-content-center">
      <div class="field <%= "has_error" if !resource.errors.details[:email].blank? %>">
        <%= f.label :メールアドレス, class: "standard_form_label" %><br />
        <%= f.email_field :email, class: "standard_form", autocomplete: "email" %>
        <%= render 'devise/errors/error_msg_email' if !resource.errors.details[:email].blank? %>
      </div>
    </div>
    
      <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
        <div>Currently waiting confirmation for: <%= resource.unconfirmed_email %></div>
      <% end %>
    
    <div class="row justify-content-center">
      <div class="field <%= "has_error" if !resource.errors.details[:password].blank? %>">
        <%= f.label :パスワード, class: "standard_form_label" %> <br />
        <%= f.password_field :password, class: "standard_form", autocomplete: "new-password" %>
        <%= render 'devise/errors/error_msg_password' if !resource.errors.details[:password].blank? %>
        
      </div>
    </div>
    
    <div class="row justify-content-center">
      <div class="field <%= "has_error" if !resource.errors.details[:password_confirmation].blank? %>">
        <%= f.label :パスワード（確認用）, class: "standard_form_label" %><br />
        <%= f.password_field :password_confirmation, class: "standard_form", autocomplete: "new-password" %>
        <%= render 'devise/errors/error_msg_password_confirmation' if !resource.errors.details[:password_confirmation].blank? %>
      </div>
    </div>
    
    <div class="row justify-content-center">
      <div class="field <%= "has_error" if !resource.errors.details[:current_password].blank? %>">
        <%= f.label :現在のパスワード, class: "standard_form_label" %> <br />
        <%= f.password_field :current_password, class: "standard_form", autocomplete: "current-password" %>
        <%= render 'devise/errors/error_msg_current_password' if !resource.errors.details[:current_password].blank? %>
      </div>
    </div>
    
      
    <div class="row justify-content-center">
      
      <div class="row wrapper_bottom_btns justify-content-end">
        <%= link_to "戻る", profile_path, class: "btn btn_bayoux btn_back_save" %>
      
        <div class="actions">
          <button type="button" class="btn btn_skyblue btn_back_save" onclick="submit()" >保存</button>
        </div>
      </div>
      
      <% end %>
    </div>
  
</div>
